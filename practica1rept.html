<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Práctica 1 Rept</title>
  </head>

  <body>
    <script type="text/javascript">
      let name;
      const gradeHandler = () => {
        const grade = {
          sum: 0,
          counter: 0
        };
        let input;
        do {
          input = prompt("Ingrese una nota (para finalizar pulse cancelar)");
          if (input !== null) {
            if (input.trim() === "") {
              alert("Debe ingresar una nota");
            } else if (isNaN(input)) {
              alert("Sólo tiene permitido ingresar números");
            } else if (Number(input) < 1 || Number(input) > 10) {
              alert("Debe ingresar una nota mayor a 0 y menor o igual a 10");
            } else {
              grade.counter += 1;
              grade.sum += Number(input);
            }
          }
        } while (input !== null);
        return grade;
      };
      const outputHandler = average => {
        let output;
        if (average > 0 && average <= 3) {
          output = "muy deficiente";
        } else if (average > 3 && average <= 5) {
          output = "insuficiente";
        } else if (average > 5 && average <= 6) {
          output = "suficiente";
        } else if (average > 6 && average <= 7) {
          output = "bien";
        } else if (average > 7 && average <= 9) {
          output = "notable";
        } else {
          output = "sobresaliente";
        }
        // eslint-disable-next-line no-unused-expressions
        !isNaN(average)
          ? alert(
              `${name} obtuvo un calificación final de ${average}, siendo ésta ${output}`
            )
          : alert("Acción cancelada");
      };
      let grade;
      name = prompt("Ingrese el nombre del alumno");
      if (name === null) {
        alert("Acción cancelada");
      } else if (name.trim() === "") {
        alert("Debe ingresar el nombre del alumno");
      } else if (!isNaN(name)) {
        alert("Sólo tiene permitido ingresar letras");
      } else {
        grade = gradeHandler();
        outputHandler(grade.sum / grade.counter);
      }
    </script>
  </body>
</html>
